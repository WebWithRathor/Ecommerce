<%include ./partials/header.ejs %>
    <%include ./partials/left.ejs %>

        <!-- Right Section (User Details) -->
        <div class="w-3/4 flex scrollbar flex-col h-[64.5vh] scrollbar overflow-y-auto">
            <h2 class="text-2xl font-semibold mb-6">User Details</h2>
            <div class="bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4">
                <form method="post" action="/user/edit" enctype="multipart/form-data" >
                    <div class="mb-4 flex items-center gap-3">
                        <img src="/images/<%= loggedUser.profileImg ? loggedUser.profileImg : "def.jpg" %>" class="h-14 bg-red-500 aspect-square rounded-full" alt="">
                        <input hidden onchange="showImg(this)" type="file" name="profileImg">
                        <h1 onclick="selectImg(this)"
                            class="px-3 py-1.5 text-sm font-medium bg-gray-400 rounded text-white">Change Image</h1>
                    </div>
                    <div class="mb-4">
                        <label class="block text-gray-700 text-sm font-bold mb-2" for="username">Username</label>
                        <input id="username" name="username"
                            class="appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                            type="text" value="<%= loggedUser.username%>">
                    </div>
                    <div class="mb-4">
                        <label class="block text-gray-700 text-sm font-bold mb-2" for="email">Email
                            Address</label>
                        <input id="email" name="email"
                            class="appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                            type="email" value="<%= loggedUser.email%>">
                    </div>
                    <div class="mb-4">
                        <label class="block text-gray-700 text-sm font-bold mb-2" for="email">
                            Address</label>
                        <input id="address" name="address"
                            class="appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                            type="address" value="<%=loggedUser.address ? loggedUser.address : "john.doe@example.com" %>"
                        >
                    </div>
                    <div class="mb-4">
                        <label class="block text-gray-700 text-sm font-bold mb-2" for="fullName">Full Name</label>
                        <input id="fullName" name="fullname"
                            class="appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                            type="text" value="<%= loggedUser.fullname ? loggedUser.fullname : 'john doe' %>">
                    </div>
                    <button id="submitButton" disabled type="submit"
                        class=" px-5 py-2 font-medium rounded text-white bg-zinc-500">Update</button>
                </form>
        </div>

        </div>
        </div>
        </div>
        </section>

        <!-- Footer -->
        <footer class="bg-gray-800 text-white py-8">
            <div class="container mx-auto text-center">
                <p>&copy; 2024 E-Commerce Store. All rights reserved.</p>
            </div>
        </footer>

        <script>
            function selectImg(img) {
                img.previousElementSibling.click();
            }
            function showImg(img) {
                img.previousElementSibling.src = URL.createObjectURL(img.files[0]);
            }
            function enableButton() {
                let button = document.getElementById("submitButton");
                button.disabled = false;
                button.classList.remove("bg-gray-400");
                button.classList.add("bg-blue-500");
            }

            document.addEventListener("DOMContentLoaded", function () {
                let inputs = document.querySelectorAll("input, textarea");

                inputs.forEach(function (input) {
                    input.addEventListener("input", enableButton);
                });
            });

        </script>
        </body>

        </html>